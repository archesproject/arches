{% load i18n %}
<div style="overflow-y: auto">
    <div id="external-page-content">
        <div style="padding: 12px;">

        <div class="panel-heading">
            <div class="graph-designer-title"><div data-bind="text: (node() && node().name()) ? node().name() : '{% trans "Unnamed node" %}'"></div></div>
        </div>

    <div class="graph-designer-header">{% trans 'Node Identifiers' %}</div>

    <!-- ko if: node() -->
    <div class="panel-body card-body fade in">
        <div class="node-section">

                <div class="node-widget-label">
                    <div class="control-label">
                        {% trans "Node Name" %}
                    </div>
                    <div>
                        <input type="text" placeholder="{% trans "Enter node name here..." %}"class="form-control library-search" style="" placeholder="{% trans "node name" %}" data-bind="value:node().name, valueUpdate: 'keyup'">
                    </div>
                </div>

                <!-- ko if: hasOntology -->
                <div class="node-widget-label">
                    <div class="control-label">
                        {% trans "CRM Class" %}
                    </div>
                    <div>
                        <select class="design" data-bind="value: node().ontologyclass, options: node().validclasses, optionsText: node().getFriendlyOntolgyName.bind(node()), valueAllowUnset: true, optionsCaption: '{% trans "Choose a class" %}', chosen: {disable_search_threshold: 10, width: '100%'}"></select>
                    </div>
                </div>

                <!-- ko if: !node().istopnode -->
                <div class="node-widget-label">
                    <div class="control-label">
                        <span style="display:flex"><div class="node-form ontology">{% trans "Relationship to" %}</div><div class="node-form node-name" data-bind="text: graphModel.getParentNode(node()).name"></div><div>({% trans "parent" %})</div></span>
                    </div>
                    <div>
                        <select class="design" data-bind="value: node().parentproperty, options: node().validproperties, optionsText: node().getFriendlyOntolgyName.bind(node()), valueAllowUnset: true, optionsCaption: '{% trans "Choose a property" %}', chosen: {disable_search_threshold: 10, width: '100%'}"></select>
                    </div>
                </div>

                <div class="node-widget-label">
                    <div class="control-label">
                        {% trans "Semantics" %}
                    </div>
                    <div>
                        <span class="node-semantic-description">
                            <div class="node-form node-name" data-bind="text: graphModel.getParentNode(node()).name"></div>
                            <div class="node-form ontology" data-bind="text: '(' + graphModel.getParentNode(node()).ontologyclass_friendlyname() + '; parent)'"></div>
                            <div class="node-form ontology" data-bind="text: node().parentproperty_friendlyname"></div>
                            <div class="node-form node-name" data-bind="text: node().name"></div>
                            <div class="node-form ontology" data-bind="text: '(' + node().ontologyclass_friendlyname()  + ')'"></div>
                        </span>
                    </div>
                </div>

                <!-- /ko -->
                <!-- /ko -->
            </div>
    </div>
    <div class="graph-designer-header">{% trans 'Node Data Type' %}</div>
    <div class="panel-body card-body fade in">

                <div class="node-widget-label">
                    <div class="control-label">
                        {% trans "Data type" %}
                    </div>
                    <div>
                        <select class="design" data-bind="disable: disableDatatype(), value: node().datatype, options: datatypes, optionsCaption: '{% trans "Choose a data type" %}', chosen: {disable_search_threshold: 10, width: '100%'}"></select>
                    </div>
                </div>

                <!-- ko if: node().datatypeIsSearchable() -->
                <div class="node-widget-label">
                    <span class="switch switch-small arches-switch" data-bind="css: {'on': node().issearchable()}, click: function () { node().issearchable(!node().issearchable()); }"><small></small></span>

                    <p class="control-label" style="margin-left: 40px; margin-top: -17px; margin-bottom: 0px;">
                        {% trans "Expose to Advanced Search" %}
                    </p>
                    <span style="margin-left: 40px; display: inline-block; color: #8ba2b9; font-size: 10px;">
                        {% trans "Activate to use this node in Advanced Search." %}
                    </span>
                </div>
                <!-- /ko -->

                <!-- ko if: node().datatypeConfigComponent -->
                <div data-bind='component: {
                    name: node().datatypeConfigComponent,
                    params: node()
                }'></div>
                <!-- /ko -->

        <hr class="section-division-dark node-section-division">

        <!-- ko if: node().datatypeIsSearchable() -->
        <div class="node-section switch-panel" data-bind="css: {'disabled': checkIfImmutable()}">
            <span class="switch switch-small arches-switch" data-bind="css: {'on': node().isrequired(), 'disabled': checkIfImmutable()}, click: toggleRequired"><small></small></span>

            <p class="control-label" style="margin-left: 40px; margin-top: -17px; margin-bottom: 0px;">
                {% trans "Required" %}
            </p>
            <span style="margin-left: 40px; display: inline-block; color: #8ba2b9; font-size: 10px;">
                {% trans "Activate to require that data be collected for this node when a card value is edited" %}
            </span>
        </div>
        <!-- /ko -->

        <!-- ko if: node() && !isResourceTopNode() -->
        <div class="node-section switch-section" data-bind="css: {'disabled': disableIsCollector()}">

            <div style="padding-top: 5px; padding-bottom: 15px;">

                <span class="switch switch-small arches-switch" data-bind="css: {'on': node().isCollector()}, click: toggleIsCollector"><small></small></span>

                <p class="control-label" style="margin-left: 40px; margin-top: -17px; margin-bottom: 0px;">
                    <span data-bind="text: (node().nodeGroupId() && !node().isCollector() || graphModel.isNodeInChildGroup(node())) ? '{% trans "Place node(s) in a separate card" %}' : '{% trans "Make card" %}'"></span>
                </p>
                <span style="margin-left: 40px; display: inline-block; color: #8ba2b9; font-size: 10px;">
                    <!-- ko if: node().istopnode -->
                    {% trans "Data from nodes not collected in other cards will be collected in the root card's form section" %}
                    <!-- /ko -->
                    <!-- ko if: !node().istopnode -->
                    {% trans "Data from this node and downstream nodes will be collected in a single form section" %}
                    <!-- /ko -->
                </span>
             </div>
          </div>
        <!-- /ko -->
    </div>
    <!-- /ko -->
</div>
</div>
</div>
