<!--
ARCHES - a program developed to inventory and manage immovable cultural heritage.
Copyright (C) 2013 J. Paul Getty Trust and World Monuments Fund

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
-->
{% load staticfiles %}
{% load i18n %}
{% load compress %}
{% load webpack_static from webpack_loader %}
{% load render_bundle from webpack_loader %}

<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->

{% if use_livereload %}
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':{{ livereload_port }}/livereload.js?snipver=1"></' + 'script>')</script>
{% endif %}

<head>
    <title>{% block title %}{{ app_settings.APP_NAME }} - {% endblock title %}</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="shortcut icon" href="{% static 'img/favicon.png' %}" />

    <script style="display: none;">
        window['default-report-template'] = `{% include 'views/report-templates/default.htm' %}`
        window['map-report-template'] = `{% include 'views/report-templates/map.htm' %}`

        window['default-card-report-template'] = `{% include 'views/components/cards/default-card-report.htm' %}`
        window['grouping-card-template'] = `{% include 'views/components/cards/grouping.htm' %}`
        window['file-viewer-card-template'] = `{% include 'views/components/cards/file-viewer.htm' %}`
        window['iiif-card-template'] = `{% include 'views/components/cards/iiif-card.htm' %}`
        window['map-card-template'] = `{% include 'views/components/cards/map.htm' %}`
        window['map-card-popup-template'] = `{% include 'views/components/cards/map-popup.htm' %}`
        window['photo-gallery-card-template'] = `{% include 'views/components/cards/photo-gallery-card.htm' %}`
        window['related-resources-map-card-template'] = `{% include 'views/components/cards/related-resources-map.htm' %}`
        window['related-resources-map-card-popup-template'] = `{% include 'views/components/cards/related-resources-map-popup.htm' %}`

        window['boolean-datatype-template'] = `{% include 'views/components/datatypes/boolean.htm' %}`
        window['concept-datatype-template'] = `{% include 'views/components/datatypes/concept.htm' %}`
        window['date-datatype-template'] = `{% include 'views/components/datatypes/date.htm' %}`
        window['domain-value-datatype-template'] = `{% include 'views/components/datatypes/domain-value.htm' %}`
        window['edtf-datatype-template'] = `{% include 'views/components/datatypes/edtf.htm' %}`
        window['file-list-datatype-template'] = `{% include 'views/components/datatypes/file-list.htm' %}`
        window['geojson-feature-collection-datatype-template'] = `{% include 'views/components/datatypes/geojson-feature-collection.htm' %}`
        window['node-value-datatype-template'] = `{% include 'views/components/datatypes/string.htm' %}`
        window['number-datatype-template'] = `{% include 'views/components/datatypes/number.htm' %}`
        window['resource-instance-datatype-template'] = `{% include 'views/components/datatypes/resource-instance.htm' %}`
        window['string-datatype-template'] = `{% include 'views/components/datatypes/string.htm' %}`
        window['url-datatype-template'] = `{% include 'views/components/datatypes/url.htm' %}`

        window['checkbox-widget-template'] = `{% include 'views/components/widgets/checkbox.htm' %}`
        window['concept-select-widget-template'] = `{% include 'views/components/widgets/concept-select.htm' %}`
        window['datepicker-widget-template'] = `{% include 'views/components/widgets/datepicker.htm' %}`
        window['edtf-widget-template'] = `{% include 'views/components/widgets/edtf.htm' %}`
        window['file-widget-template'] = `{% include 'views/components/widgets/file.htm' %}`
        window['iiif-widget-template'] = `{% include 'views/components/widgets/iiif.htm' %}`
        window['map-widget-template'] = `{% include 'views/components/widgets/map.htm' %}`
        window['node-value-select-widget-template'] = `{% include 'views/components/widgets/node-value-select.htm' %}`
        window['number-widget-template'] = `{% include 'views/components/widgets/number.htm' %}`
        window['radio-boolean-widget-template'] = `{% include 'views/components/widgets/radio-boolean.htm' %}`
        window['radio-widget-template'] = `{% include 'views/components/widgets/radio.htm' %}`
        window['resource-instance-select-widget-template'] = `{% include 'views/components/widgets/resource-instance-select.htm' %}`
        window['rich-text-widget-template'] = `{% include 'views/components/widgets/rich-text.htm' %}`
        window['select-widget-template'] = `{% include 'views/components/widgets/select.htm' %}`
        window['switch-widget-template'] = `{% include 'views/components/widgets/switch.htm' %}`
        window['text-widget-template'] = `{% include 'views/components/widgets/text.htm' %}`
        window['urldatatype-widget-template'] = `{% include 'views/components/widgets/urldatatype.htm' %}`
    </script>
    {% block css %}
        {% compress css %}
        <link type="text/x-scss" href="{% static 'css/arches.scss' %}" rel="stylesheet" media="screen">
    	{% endcompress %}
        {% if app_settings.ACCESSIBILITY_MODE %}
        <link href="{% static 'css/accessibility.css' %}" rel="stylesheet">
        {% endif %}
        <link href="{% static 'css/package.css' %}" rel="stylesheet">
        <link href="{% static 'css/project.css' %}" rel="stylesheet">
    {% endblock css%}

</head>

<body {% block body_attributes %}class="scroll-y-auto"{% endblock %}>
    {% block loading_mask %}

    <div class="loading-mask" data-bind="visible: typeof(loading()) === 'boolean' && loading()"></div>

    <div class="loading-mask" style="display: none;" data-bind="visible: typeof(loading()==='string') && loading().length > 0">
        <div class="loading-mask-string" data-bind="text: loading"></div>
    </div>


    {% endblock loading_mask %}
    {% block body %}

    {% endblock body %}
</body>

{% block javascript %}
    <script src="{% webpack_static 'node_modules/requirejs/require.js' %}"></script>
    <script src="{% webpack_static '' %}/build/js/{{main_script}}.js"></script>

    {% block pre_require_js %}
    {% endblock pre_require_js %}

    {% include 'javascript.htm' %}

    {% if app_settings.GOOGLE_ANALYTICS_TRACKING_ID != None %}

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', '{{app_settings.GOOGLE_ANALYTICS_TRACKING_ID}}', 'auto');
            ga('send', 'pageview');
        </script>

    {% endif %}

{% endblock javascript %}

</html>
